#-----------------------------------------
# Assign floating IP to server instance
#-----------------------------------------

resource "ibm_is_floating_ip" "server-zone1-fip" {
  count     = ibm_is_instance.server-zone1.count
  name    = "${var.server-name}-${var.zone1}-fip"
  target  = element(ibm_is_instance.server-zone1.primary_network_interface[0].id, count.index)
  }
  
